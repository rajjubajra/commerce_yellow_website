(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{3428:function(i,l,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shopping/products",function(){return e(4561)}])},9903:function(i,l,e){"use strict";var n=e(5893);e(7294),l.Z=function(i){let{title:l}=i;return(0,n.jsx)("div",{className:"w-full my-10 px-10",children:(0,n.jsx)("h2",{className:"text-3xl",children:l})})}},4561:function(i,l,e){"use strict";e.r(l),e.d(l,{default:function(){return f}});var n=e(5893),d=e(9903),t=function(i){var l;let{item:e}=i;return(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"mb-2",children:null==e?void 0:null===(l=e.attributes)||void 0===l?void 0:l.title})})},o=e(7294),r=e(5675),a=e.n(r),u=e(491),s=function(i){let{included:l,images:e}=i,{urlarr:d}=function(i){let{included:l,images:e}=i,[n,d]=(0,o.useState)([]);return(0,o.useEffect)(()=>{let i=[],n=[];e&&(null==e||e.map(e=>{var n,d,t,o,r;let a=l&&(null==l?void 0:l.find(i=>i.id===(null==e?void 0:e.id)));(null==a?void 0:null===(d=a.relationships)||void 0===d?void 0:null===(n=d.field_media_image)||void 0===n?void 0:n.data)&&i.push({id:a.relationships.field_media_image.data.id,height:null===(t=a.relationships.field_media_image.data.meta)||void 0===t?void 0:t.height,width:null===(o=a.relationships.field_media_image.data.meta)||void 0===o?void 0:o.width,alt:null===(r=a.relationships.field_media_image.data.meta)||void 0===r?void 0:r.alt})})),i&&i.map(i=>{var e,d;let t=l&&(null==l?void 0:l.find(l=>l.id===i.id));(null==t?void 0:null===(d=t.attributes)||void 0===d?void 0:null===(e=d.uri)||void 0===e?void 0:e.url)&&n.push({id:i.id,imgurl:t.attributes.uri.url,width:i.width,height:i.height,alt:i.alt})}),d(n)},[e,l]),{urlarr:n}}({included:l,images:e});return(0,n.jsx)("div",{children:d&&Array.isArray(d)&&d.length>0&&d.map((i,l)=>0===l&&(0,n.jsx)("div",{children:(0,n.jsx)(a(),{className:"w-full md:w-96 h-96 object-cover",src:"".concat(u.g.uri).concat(i.imgurl),height:i.height,width:i.width,alt:i.alt})},i.id))})};let v=i=>{let{varArr:l,included:e}=i,[n,d]=(0,o.useState)([]),[t,r]=(0,o.useState)(!1),[a,u]=(0,o.useState)(!1);return console.log("variation: ",n),console.log(l),console.log(e),(0,o.useEffect)(()=>{let i=[];l&&l.map(l=>{var n,d,t,o,r,a,u,s,v,c;let h=null==e?void 0:e.find(i=>i.id===l.id);i.push({id:null==h?void 0:h.id,title:null==h?void 0:null===(n=h.attributes)||void 0===n?void 0:n.title,sku:null==h?void 0:null===(d=h.attributes)||void 0===d?void 0:d.sku,price:parseFloat(null==h?void 0:null===(o=h.attributes)||void 0===o?void 0:null===(t=o.price)||void 0===t?void 0:t.number),currency:null==h?void 0:null===(a=h.attributes)||void 0===a?void 0:null===(r=a.price)||void 0===r?void 0:r.currency_code,weight:null==h?void 0:null===(s=h.attributes)||void 0===s?void 0:null===(u=s.weight)||void 0===u?void 0:u.number,unite:null==h?void 0:null===(c=h.attributes)||void 0===c?void 0:null===(v=c.weight)||void 0===v?void 0:v.unit})}),d(i)},[e,l]),{data:n,isLoading:t,isError:a}};var c=function(i){var l,e,d;let{varArr:t,included:o}=i,{data:r,isError:a,isLoading:u}=v({varArr:t,included:o});return(0,n.jsx)("div",{className:"p-2 m-1",children:r&&r.length>1?(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("div",{children:null===(l=r[0])||void 0===l?void 0:l.currency}),(0,n.jsx)("div",{children:Math.max(...r.map(i=>{var l;return null!==(l=null==i?void 0:i.price.toFixed(2))&&void 0!==l?l:null}))}),"-",(0,n.jsx)("div",{children:Math.min(...r.map(i=>{var l;return null!==(l=null==i?void 0:i.price.toFixed(2))&&void 0!==l?l:null}))})]}):(0,n.jsx)("div",{children:r&&parseInt(null===(e=r[0])||void 0===e?void 0:e.price,10).toFixed(2)+" "+(null===(d=r[0])||void 0===d?void 0:d.currency)})})},h=e(1664),m=e.n(h),p=function(i){let{item:l}=i;return(0,n.jsx)("div",{children:(0,n.jsx)(m(),{href:"/shopping/product/".concat(null==l?void 0:l.id),className:"py-2 px-4 border border-gray-700 text-center w-36",children:"View Item"})})},g=e(777),f=function(){var i,l;let{data:e,error:o,isLoading:r}=function(){let{data:i,isLoading:l,error:e}=(0,g.a)({queryKey:["getSession"],queryFn:()=>fetch("".concat(u.g.url,"/session/token"),{credentials:"include"}).then(i=>i.text())});console.log("token",i,"tokenLoading",l,"tokenerror",e);let n={Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json","Commerce-Cart-Token":null!=i?i:""},d="".concat(u.g.url,"/jsonapi/commerce_product/physical").concat("?include=image_media.field_media_image,variations"),{data:t,isLoading:o,error:r}=(0,g.a)({queryKey:["productlist"],queryFn:()=>fetch(d,{headers:n}).then(i=>i.json())});return console.log("Product Listing: ",t),{data:t,isLoading:o,error:r}}();return o&&o.message?(0,n.jsxs)("div",{children:["Eror: ",o.message]}):r?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)("div",{className:"w-full flex flex-col justify-center items-center",children:[(0,n.jsx)(d.Z,{title:"Shopping"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-4",children:e&&(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.length)>0&&(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.map(i=>{var l,d,o,r;return(0,n.jsxs)("div",{className:"border p-4",children:[(0,n.jsx)(t,{item:i}),(0,n.jsx)("div",{className:"w-80 my-4",children:(0,n.jsx)(s,{included:null==e?void 0:e.included,images:null==i?void 0:null===(d=i.relationships)||void 0===d?void 0:null===(l=d.image_media)||void 0===l?void 0:l.data})}),(0,n.jsx)("div",{children:(0,n.jsx)(c,{included:e&&(null==e?void 0:e.included),varArr:null==i?void 0:null===(r=i.relationships)||void 0===r?void 0:null===(o=r.variations)||void 0===o?void 0:o.data})}),(0,n.jsx)("div",{children:(0,n.jsx)(p,{item:i})})]},i.id)}))})]})}}},function(i){i.O(0,[675,888,774,179],function(){return i(i.s=3428)}),_N_E=i.O()}]);