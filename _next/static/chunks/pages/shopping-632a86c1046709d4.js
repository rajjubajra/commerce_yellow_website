(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{795:function(i,l,d){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shopping",function(){return d(9593)}])},9903:function(i,l,d){"use strict";var n=d(5893);d(7294),l.Z=function(i){let{title:l}=i;return(0,n.jsx)("div",{className:"w-full my-10 px-10",children:(0,n.jsx)("h2",{className:"text-3xl",children:l})})}},9593:function(i,l,d){"use strict";d.r(l),d.d(l,{default:function(){return f}});var n=d(5893),e=d(9903),o=function(i){var l;let{item:d}=i;return(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"mb-2",children:null==d?void 0:null===(l=d.attributes)||void 0===l?void 0:l.title})})},t=d(7294),u=d(5675),v=d.n(u),r=d(491),a=function(i){let{included:l,images:d}=i,{urlarr:e}=function(i){let{included:l,images:d}=i;console.log("INCLUDED : ",d);let[n,e]=(0,t.useState)([]);return(0,t.useEffect)(()=>{let i=[],n=[];d&&(null==d||d.map(d=>{var n,e,o,t,u,v,r,a,s,c,h,m,p,g,x,f,j;let _=l&&(null==l?void 0:l.find(i=>(null==i?void 0:i.id)===(null==d?void 0:d.id)));_&&(null==_?void 0:null===(e=_.relationships)||void 0===e?void 0:null===(n=e.field_media_image)||void 0===n?void 0:n.data)&&i.push({id:null==_?void 0:null===(u=_.relationships)||void 0===u?void 0:null===(t=u.field_media_image)||void 0===t?void 0:null===(o=t.data)||void 0===o?void 0:o.id,height:null==_?void 0:null===(s=_.relationships)||void 0===s?void 0:null===(a=s.field_media_image)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:null===(v=r.meta)||void 0===v?void 0:v.height,width:null==_?void 0:null===(p=_.relationships)||void 0===p?void 0:null===(m=p.field_media_image)||void 0===m?void 0:null===(h=m.data)||void 0===h?void 0:null===(c=h.meta)||void 0===c?void 0:c.width,alt:null==_?void 0:null===(j=_.relationships)||void 0===j?void 0:null===(f=j.field_media_image)||void 0===f?void 0:null===(x=f.data)||void 0===x?void 0:null===(g=x.meta)||void 0===g?void 0:g.alt})})),i&&i.map(i=>{var d,e,o,t;let u=l&&(null==l?void 0:l.find(l=>(null==l?void 0:l.id)===(null==i?void 0:i.id)));(null==u?void 0:null===(e=u.attributes)||void 0===e?void 0:null===(d=e.uri)||void 0===d?void 0:d.url)&&(null==n||n.push({id:null==i?void 0:i.id,imgurl:null==u?void 0:null===(t=u.attributes)||void 0===t?void 0:null===(o=t.uri)||void 0===o?void 0:o.url,width:null==i?void 0:i.width,height:null==i?void 0:i.height,alt:null==i?void 0:i.alt}))}),e(n)},[d,l]),{urlarr:n}}({included:l,images:d});return(0,n.jsx)("div",{children:e&&Array.isArray(e)&&e.length>0&&e.map((i,l)=>0===l&&(0,n.jsx)("div",{children:(0,n.jsx)(v(),{className:"w-full md:w-96 h-96 object-cover",src:"".concat(r.g.uri).concat(i.imgurl),height:i.height,width:i.width,alt:i.alt})},i.id))})};let s=i=>{let{varArr:l,included:d}=i,[n,e]=(0,t.useState)([]),[o,u]=(0,t.useState)(!1),[v,r]=(0,t.useState)(!1);return console.log("variation: ",n),console.log(l),console.log(d),(0,t.useEffect)(()=>{let i=[];l&&l.map(l=>{var n,e,o,t,u,v,r,a,s,c;let h=null==d?void 0:d.find(i=>i.id===l.id);i.push({id:null==h?void 0:h.id,title:null==h?void 0:null===(n=h.attributes)||void 0===n?void 0:n.title,sku:null==h?void 0:null===(e=h.attributes)||void 0===e?void 0:e.sku,price:parseFloat(null==h?void 0:null===(t=h.attributes)||void 0===t?void 0:null===(o=t.price)||void 0===o?void 0:o.number),currency:null==h?void 0:null===(v=h.attributes)||void 0===v?void 0:null===(u=v.price)||void 0===u?void 0:u.currency_code,weight:null==h?void 0:null===(a=h.attributes)||void 0===a?void 0:null===(r=a.weight)||void 0===r?void 0:r.number,unite:null==h?void 0:null===(c=h.attributes)||void 0===c?void 0:null===(s=c.weight)||void 0===s?void 0:s.unit})}),e(i)},[d,l]),{data:n,isLoading:o,isError:v}};var c=function(i){var l,d,e;let{varArr:o,included:t}=i,{data:u,isError:v,isLoading:r}=s({varArr:o,included:t});return(0,n.jsx)("div",{className:"p-2 m-1",children:u&&u.length>1?(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("div",{children:null===(l=u[0])||void 0===l?void 0:l.currency}),(0,n.jsx)("div",{children:Math.max(...u.map(i=>{var l;return null!==(l=null==i?void 0:i.price.toFixed(2))&&void 0!==l?l:null}))}),"-",(0,n.jsx)("div",{children:Math.min(...u.map(i=>{var l;return null!==(l=null==i?void 0:i.price.toFixed(2))&&void 0!==l?l:null}))})]}):(0,n.jsx)("div",{children:u&&parseInt(null===(d=u[0])||void 0===d?void 0:d.price,10).toFixed(2)+" "+(null===(e=u[0])||void 0===e?void 0:e.currency)})})},h=d(1664),m=d.n(h),p=function(i){let{item:l}=i;return(0,n.jsx)("div",{children:(0,n.jsx)(m(),{href:"/shopping/".concat(null==l?void 0:l.id),className:"py-2 px-4 border border-gray-700 text-center w-36",children:"View Item"})})},g=d(777),x=function(){var i,l;let{data:d,error:t,isLoading:u}=function(){let{data:i,isLoading:l,error:d}=(0,g.a)({queryKey:["getSession"],queryFn:()=>fetch("".concat(r.g.url,"/session/token"),{credentials:"include"}).then(i=>i.text())});console.log("token",i,"tokenLoading",l,"tokenerror",d);let n={Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json","Commerce-Cart-Token":null!=i?i:""},e="".concat(r.g.url,"/jsonapi/commerce_product/physical").concat("?include=image_media.field_media_image,variations,stores"),{data:o,isLoading:t,error:u}=(0,g.a)({queryKey:["productlist"],queryFn:()=>fetch(e,{headers:n}).then(i=>i.json())});return console.log("shop item Listing: ",o),{data:o,isLoading:t,error:u}}();return t&&t.message?(0,n.jsxs)("div",{children:["Eror: ",t.message]}):u?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)("div",{className:"w-full flex flex-col justify-center items-center",children:[(0,n.jsx)(e.Z,{title:"Shopping"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-4",children:d&&(null==d?void 0:null===(i=d.data)||void 0===i?void 0:i.length)>0&&(null==d?void 0:null===(l=d.data)||void 0===l?void 0:l.map(i=>{var l,e,t,u;return(0,n.jsxs)("div",{className:"border p-4",children:[(0,n.jsx)(o,{item:i}),(0,n.jsx)("div",{className:"w-80 my-4",children:(0,n.jsx)(a,{included:null==d?void 0:d.included,images:null==i?void 0:null===(e=i.relationships)||void 0===e?void 0:null===(l=e.image_media)||void 0===l?void 0:l.data})}),(0,n.jsx)("div",{children:(0,n.jsx)(c,{included:d&&(null==d?void 0:d.included),varArr:null==i?void 0:null===(u=i.relationships)||void 0===u?void 0:null===(t=u.variations)||void 0===t?void 0:t.data})}),(0,n.jsx)("div",{children:(0,n.jsx)(p,{item:i})})]},i.id)}))})]})},f=function(){return(0,n.jsx)("div",{children:(0,n.jsx)(x,{})})}}},function(i){i.O(0,[888,774,179],function(){return i(i.s=795)}),_N_E=i.O()}]);