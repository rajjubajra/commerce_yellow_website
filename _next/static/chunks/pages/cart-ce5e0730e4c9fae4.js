(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{4476:function(i,d,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return l(4079)}])},4079:function(i,d,l){"use strict";l.r(d),l.d(d,{default:function(){return x}});var n=l(5893),o=l(59),t=l(6324),e=l(491),r=l(777);function u(){let{data:i,isLoading:d,error:l}=(0,r.a)({queryKey:["getSession"],queryFn:()=>fetch("".concat(e.g.url,"/session/token"),{headers:{Accept:"application/vnd.api+json"}}).then(i=>i.text())}),n="".concat(e.g.url,"/jsonapi/carts"),o={Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json",token:null!=i?i:""};console.log("token loading",d);let{data:t,isLoading:u,isError:v}=(0,r.a)({queryKey:["getCart"],queryFn:()=>fetch(n,{headers:o}).then(i=>i.json())});return console.log("CART REPORT: ",t,v,u,l),{data:t,isError:v,isLoading:u,tokenError:l}}var v=l(7294),a=function(){let[i,d]=(0,v.useState)([]),{data:l,isError:e,isLoading:r}=u();return((0,v.useEffect)(()=>{l&&d(null==l?void 0:l.data)},[l]),e)?(0,n.jsx)(t.default,{}):r?(0,n.jsx)(o.default,{}):(0,n.jsx)("div",{children:i&&(null==i?void 0:i.map(i=>{var d,l,o,t,e,r,u,v,a,s;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["Email: ",null===(d=i.attributes)||void 0===d?void 0:d.mail]}),(0,n.jsxs)("div",{children:["Order sub Total: ",null==i?void 0:null===(t=i.attributes)||void 0===t?void 0:null===(o=t.order_total)||void 0===o?void 0:null===(l=o.subtotal)||void 0===l?void 0:l.number]}),(0,n.jsxs)("div",{children:["Order Total: ",null==i?void 0:null===(u=i.attributes)||void 0===u?void 0:null===(r=u.order_total)||void 0===r?void 0:null===(e=r.total)||void 0===e?void 0:e.number]}),(0,n.jsxs)("div",{children:["Store Id: ",null==i?void 0:null===(s=i.relationships)||void 0===s?void 0:null===(a=s.store_id)||void 0===a?void 0:null===(v=a.data)||void 0===v?void 0:v.id]}),(0,n.jsxs)("div",{children:["Type: ",null==i?void 0:i.type]})]},i.id)}))})},s=l(1664),c=l.n(s),p=function(){return(0,n.jsx)("div",{className:"w-full flex justify-center mt-28",children:(0,n.jsx)("div",{children:"Your Cart is empty"})})},h=function(){var i,d;let[l,o]=(0,v.useState)([]),{data:t,isError:r,isLoading:a}=u(),s=(i,d)=>{var l,n,o;let t=i&&(null==i?void 0:i.find(i=>i.id===d));return{sku:null==t?void 0:null===(l=t.attributes)||void 0===l?void 0:l.sku,weight:parseInt(null===(n=t.attributes)||void 0===n?void 0:n.weight.number),unit:null===(o=t.attributes)||void 0===o?void 0:o.weight.unit}};return(0,v.useEffect)(()=>{var i,d,l,n,e,r,u,v,a,c,p;let h=[];console.log("to be set data: ",t&&(null==t?void 0:null===(l=t.data[0])||void 0===l?void 0:null===(d=l.relationships)||void 0===d?void 0:null===(i=d.order_items)||void 0===i?void 0:i.data)),t&&(null==t?void 0:t.data)&&(null==t?void 0:null===(n=t.data[0])||void 0===n?void 0:n.relationships)&&(null==t?void 0:null===(r=t.data[0])||void 0===r?void 0:null===(e=r.relationships)||void 0===e?void 0:e.order_items)&&(null==t?void 0:null===(v=t.data[0])||void 0===v?void 0:null===(u=v.relationships.order_items)||void 0===u?void 0:u.data)&&h.push(...null==t?void 0:null===(p=t.data[0])||void 0===p?void 0:null===(c=p.relationships)||void 0===c?void 0:null===(a=c.order_items)||void 0===a?void 0:a.data),console.log("set in an Array: ",h);let x=[];h.length>0&&(null==h||h.map(i=>{var d,l,n,o,e,r,u,v,a,c,p,h,_,m,j;let y=null==t?void 0:null===(d=t.included)||void 0===d?void 0:d.find(d=>d.id===i.id);x.push({id:null==y?void 0:y.id,order_id:null==y?void 0:null===(n=y.relationships)||void 0===n?void 0:null===(l=n.order_id)||void 0===l?void 0:l.data,type:null==y?void 0:y.type,order_item_id:null==y?void 0:null===(o=y.attributes)||void 0===o?void 0:o.drupal_internal__order_item_id,quantity:parseInt(null==y?void 0:null===(e=y.attributes)||void 0===e?void 0:e.quantity,10),title:null==y?void 0:null===(r=y.attributes)||void 0===r?void 0:r.title,currency_code:null==y?void 0:null===(v=y.attributes)||void 0===v?void 0:null===(u=v.unit_price)||void 0===u?void 0:u.currency_code,unit_price:parseInt(null==y?void 0:null===(c=y.attributes)||void 0===c?void 0:null===(a=c.unit_price)||void 0===a?void 0:a.number,10),total_price:parseInt(null==y?void 0:null===(h=y.attributes)||void 0===h?void 0:null===(p=h.total_price)||void 0===p?void 0:p.number,10),variations:s(t&&(null==t?void 0:t.included),null==y?void 0:null===(j=y.relationships)||void 0===j?void 0:null===(m=j.purchased_entity)||void 0===m?void 0:null===(_=m.data)||void 0===_?void 0:_.id)})})),o(x)},[t]),(0,n.jsxs)("div",{className:"border p-2",children:[l&&l.length>0?null==l?void 0:l.map(i=>{var d,l,o,e,r,u,v,a;return(0,n.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,n.jsxs)("div",{className:"text-sm border p-2 m-1",children:[(0,n.jsxs)("div",{className:"text-xs",children:["id:",null==i?void 0:i.id]}),(0,n.jsxs)("div",{children:["Order Item Id: ",null==i?void 0:i.order_item_id]}),(0,n.jsxs)("div",{children:["Title: ",null==i?void 0:i.title]}),(0,n.jsxs)("div",{children:["SKU: ",null==i?void 0:null===(d=i.variations)||void 0===d?void 0:d.sku]})]}),(0,n.jsxs)("div",{className:"border p-2 m-1",children:[(0,n.jsxs)("div",{children:["Quantity: ",null==i?void 0:i.quantity]}),(0,n.jsxs)("div",{children:["Unit Price: ",null==i?void 0:i.unit_price]}),(0,n.jsxs)("div",{children:["Weight: ",null==i?void 0:null===(l=i.variations)||void 0===l?void 0:l.weight," ",null==i?void 0:null===(o=i.variations)||void 0===o?void 0:o.unit]})]}),(0,n.jsx)("div",{className:"flex gap-1 border p-2 m-1",children:(0,n.jsxs)("div",{children:["Total Price: ",null==i?void 0:i.total_price]})}),(0,n.jsxs)("div",{className:"border p-2 m-1",children:[(0,n.jsxs)("div",{className:"my-1 px-4 py-2 flex gap-4 border",children:[(0,n.jsx)(c(),{className:"p-4 border",href:"/cart/".concat(null==t?void 0:null===(e=t.data[0])||void 0===e?void 0:e.id,"?itemId=").concat(null==i?void 0:i.id,"&type=").concat(null==i?void 0:null===(r=i.order_id)||void 0===r?void 0:r.type,"&qty=").concat(null==i?void 0:i.quantity,"&add=",!0),children:"[ + ]"}),(null==i?void 0:i.quantity)>0&&(0,n.jsx)(c(),{className:"p-4 border",href:"/cart/".concat(null==t?void 0:null===(u=t.data[0])||void 0===u?void 0:u.id,"?itemId=").concat(null==i?void 0:i.id,"&type=").concat(null==i?void 0:null===(v=i.order_id)||void 0===v?void 0:v.type,"&qty=").concat(null==i?void 0:i.quantity,"&add=",!1),children:"[ - ]"})]}),(0,n.jsx)(c(),{className:"p-4 border",href:"/cart/".concat(null==t?void 0:null===(a=t.data[0])||void 0===a?void 0:a.id,"?itemId=").concat(null==i?void 0:i.id,"&type=").concat(null==i?void 0:i.type,"&delete=",!0),children:"Delete"})]})]},null==i?void 0:i.id)}):(0,n.jsx)(p,{}),l&&l.length>0&&(0,n.jsx)("div",{children:(0,n.jsx)(c(),{href:"".concat(e.g.url,"/checkout/").concat(null===(d=t.data[0])||void 0===d?void 0:null===(i=d.attributes)||void 0===i?void 0:i.drupal_internal__order_id,"/order_information"),children:"Checkout"})})]})},x=function(){return(0,n.jsxs)("div",{className:"md:px-20 px-5 py-10",children:[(0,n.jsx)("div",{children:(0,n.jsx)(a,{})}),(0,n.jsx)("div",{className:"my-10",children:(0,n.jsx)(h,{})})]})}}},function(i){i.O(0,[888,774,179],function(){return i(i.s=4476)}),_N_E=i.O()}]);