(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{795:function(i,e,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shopping",function(){return l(8863)}])},9903:function(i,e,l){"use strict";var n=l(5893);l(7294),e.Z=function(i){let{title:e}=i;return(0,n.jsx)("div",{className:"w-full my-10 px-10",children:(0,n.jsx)("h2",{className:"text-3xl",children:e})})}},8863:function(i,e,l){"use strict";l.r(e);var n=l(5893),d=l(4561);e.default=function(){return(0,n.jsx)("div",{children:(0,n.jsx)(d.default,{})})}},4561:function(i,e,l){"use strict";l.r(e),l.d(e,{default:function(){return x}});var n=l(5893),d=l(9903),t=function(i){var e;let{item:l}=i;return(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"mb-2",children:null==l?void 0:null===(e=l.attributes)||void 0===e?void 0:e.title})})},o=l(7294),r=l(5675),a=l.n(r),u=l(491),s=function(i){let{included:e,images:l}=i,{urlarr:d}=function(i){let{included:e,images:l}=i,[n,d]=(0,o.useState)([]);return(0,o.useEffect)(()=>{let i=[],n=[];l&&(null==l||l.map(l=>{var n,d,t,o,r;let a=e&&(null==e?void 0:e.find(i=>i.id===(null==l?void 0:l.id)));(null==a?void 0:null===(d=a.relationships)||void 0===d?void 0:null===(n=d.field_media_image)||void 0===n?void 0:n.data)&&i.push({id:a.relationships.field_media_image.data.id,height:null===(t=a.relationships.field_media_image.data.meta)||void 0===t?void 0:t.height,width:null===(o=a.relationships.field_media_image.data.meta)||void 0===o?void 0:o.width,alt:null===(r=a.relationships.field_media_image.data.meta)||void 0===r?void 0:r.alt})})),i&&i.map(i=>{var l,d;let t=e&&(null==e?void 0:e.find(e=>e.id===i.id));(null==t?void 0:null===(d=t.attributes)||void 0===d?void 0:null===(l=d.uri)||void 0===l?void 0:l.url)&&n.push({id:i.id,imgurl:t.attributes.uri.url,width:i.width,height:i.height,alt:i.alt})}),d(n)},[l,e]),{urlarr:n}}({included:e,images:l});return(0,n.jsx)("div",{children:d&&Array.isArray(d)&&d.length>0&&d.map((i,e)=>0===e&&(0,n.jsx)("div",{children:(0,n.jsx)(a(),{className:"w-full md:w-96 h-96 object-cover",src:"".concat(u.g.uri).concat(i.imgurl),height:i.height,width:i.width,alt:i.alt})},i.id))})};let v=i=>{let{varArr:e,included:l}=i,[n,d]=(0,o.useState)([]),[t,r]=(0,o.useState)(!1),[a,u]=(0,o.useState)(!1);return console.log("variation: ",n),console.log(e),console.log(l),(0,o.useEffect)(()=>{let i=[];e&&e.map(e=>{var n,d,t,o,r,a,u,s,v,c;let h=null==l?void 0:l.find(i=>i.id===e.id);i.push({id:null==h?void 0:h.id,title:null==h?void 0:null===(n=h.attributes)||void 0===n?void 0:n.title,sku:null==h?void 0:null===(d=h.attributes)||void 0===d?void 0:d.sku,price:parseFloat(null==h?void 0:null===(o=h.attributes)||void 0===o?void 0:null===(t=o.price)||void 0===t?void 0:t.number),currency:null==h?void 0:null===(a=h.attributes)||void 0===a?void 0:null===(r=a.price)||void 0===r?void 0:r.currency_code,weight:null==h?void 0:null===(s=h.attributes)||void 0===s?void 0:null===(u=s.weight)||void 0===u?void 0:u.number,unite:null==h?void 0:null===(c=h.attributes)||void 0===c?void 0:null===(v=c.weight)||void 0===v?void 0:v.unit})}),d(i)},[l,e]),{data:n,isLoading:t,isError:a}};var c=function(i){var e,l,d;let{varArr:t,included:o}=i,{data:r,isError:a,isLoading:u}=v({varArr:t,included:o});return(0,n.jsx)("div",{className:"p-2 m-1",children:r&&r.length>1?(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("div",{children:null===(e=r[0])||void 0===e?void 0:e.currency}),(0,n.jsx)("div",{children:Math.max(...r.map(i=>{var e;return null!==(e=null==i?void 0:i.price.toFixed(2))&&void 0!==e?e:null}))}),"-",(0,n.jsx)("div",{children:Math.min(...r.map(i=>{var e;return null!==(e=null==i?void 0:i.price.toFixed(2))&&void 0!==e?e:null}))})]}):(0,n.jsx)("div",{children:r&&parseInt(null===(l=r[0])||void 0===l?void 0:l.price,10).toFixed(2)+" "+(null===(d=r[0])||void 0===d?void 0:d.currency)})})},h=l(1664),m=l.n(h),p=function(i){let{item:e}=i;return(0,n.jsx)("div",{children:(0,n.jsx)(m(),{href:"/shopping/product/".concat(null==e?void 0:e.id),className:"py-2 px-4 border border-gray-700 text-center w-36",children:"View Item"})})},f=l(777),x=function(){var i,e;let{data:l,error:o,isLoading:r}=function(){let{data:i,isLoading:e,error:l}=(0,f.a)({queryKey:["getSession"],queryFn:()=>fetch("".concat(u.g.url,"/session/token"),{credentials:"include"}).then(i=>i.text())});console.log("token",i,"tokenLoading",e,"tokenerror",l);let n={Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json","Commerce-Cart-Token":null!=i?i:""},d="".concat(u.g.url,"/jsonapi/commerce_product/physical").concat("?include=image_media.field_media_image,variations"),{data:t,isLoading:o,error:r}=(0,f.a)({queryKey:["productlist"],queryFn:()=>fetch(d,{headers:n}).then(i=>i.json())});return console.log("Product Listing: ",t),{data:t,isLoading:o,error:r}}();return o&&o.message?(0,n.jsxs)("div",{children:["Eror: ",o.message]}):r?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)("div",{className:"w-full flex flex-col justify-center items-center",children:[(0,n.jsx)(d.Z,{title:"Shopping"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-4",children:l&&(null==l?void 0:null===(i=l.data)||void 0===i?void 0:i.length)>0&&(null==l?void 0:null===(e=l.data)||void 0===e?void 0:e.map(i=>{var e,d,o,r;return(0,n.jsxs)("div",{className:"border p-4",children:[(0,n.jsx)(t,{item:i}),(0,n.jsx)("div",{className:"w-80 my-4",children:(0,n.jsx)(s,{included:null==l?void 0:l.included,images:null==i?void 0:null===(d=i.relationships)||void 0===d?void 0:null===(e=d.image_media)||void 0===e?void 0:e.data})}),(0,n.jsx)("div",{children:(0,n.jsx)(c,{included:l&&(null==l?void 0:l.included),varArr:null==i?void 0:null===(r=i.relationships)||void 0===r?void 0:null===(o=r.variations)||void 0===o?void 0:o.data})}),(0,n.jsx)("div",{children:(0,n.jsx)(p,{item:i})})]},i.id)}))})]})}}},function(i){i.O(0,[675,888,774,179],function(){return i(i.s=795)}),_N_E=i.O()}]);